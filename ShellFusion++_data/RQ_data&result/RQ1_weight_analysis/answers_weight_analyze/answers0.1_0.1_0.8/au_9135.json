{
  "Query": "How to backup settings and list of installed packages",
  "Answers": [
    {
      "Command": "dpkg-query",
      "MP Summary": "a tool to query the dpkg database",
      "Most Similar TLDR Task": "List all files installed by a package",
      "Most Similar TLDR Script": "dpkg-query -L {{package_name}}",
      "Top-3 Similar Questions": [
        "tldr_687: List all files installed by a package",
        "au_1160322: Retrieve a complete list of installed packages"
      ],
      "Top-3 Scripts": [
        "tldr_687: dpkg-query -L {{package_name}}",
        "au_1160322: dpkg -l\n# or\ndpkg-query -f '${binary:Package}\\n' -W\n# or\ndpkg --get-selections | grep -v deinstall\n# or\napt list --installed"
      ],
      "Explanations about Options": {
        "-L": "List files installed to your system from package-name. When multiple package-name\n are listed, the requested lists of files are separated by an empty line, with the\n same order as specified on the argument list. However, note that files created by\n package-specific installation-scripts are not listed.",
        "-f": "This option is used to specify the format of the output --show will produce (short\n option since dpkg 1.13.1). The format is a string that will be output for each\n package listed.",
        "-W": "Just like the --list option this will list all packages matching the given pattern.\n However the output can be customized using the --showformat option. The default\n output format gives one line per matching package, each line having the name\n (extended with the architecture qualifier for Multi-Arch same packages) and\n installed version of the package, separated by a tab."
      }
    },
    {
      "Command": "install",
      "MP Summary": "copy files and set attributes",
      "Most Similar TLDR Task": "Copy files to destination, setting their ownership",
      "Most Similar TLDR Script": "install -o {{user}} {{path/to/source}} {{path/to/destination}}",
      "Top-3 Similar Questions": [
        "ul_654369: Where does Debian store the list of installed packages?",
        "au_158052: Is there a way to backup your package configuration?",
        "au_576306: Backup of Flashdrive"
      ],
      "Top-3 Scripts": [
        "ul_654369: Status: install ok installed\n\nawk '/^Package:/ { package = $2 }\n     /^Status: install ok installed/ { print package }' /path/to/status\n\nawk '/^Package:/ { p = $2; i = 0 }\n     /^Status: install ok installed/ { i = 1 }\n     i && /^Architecture: all/ { print p; next }\n     i && /^Architecture/ { printf \"%s:%s\\n\", p, $2 }' /path/to/status\n\nawk 'FNR == NR && /^Package:/ { p = $2 }\n     /^Status: install ok installed/ { i = 1 }\n     FNR == NR && i && /^Architecture: all/ { ps[p] = 1; next }\n     FNR == NR && i && /^Architecture/ { ps[p \":\" $2] = 1}\n     FNR != NR && /^Package:/ { p = $2 }\n     FNR != NR && /^Architecture:/ { a = $2 }\n     /^Auto-Installed: 1/ { delete ps[p \":\" a] }\n     END { for (p in ps) print p }' /path/to/status /path/to/extended_states",
        "au_158052: dpkg --set-selections < /path/to/backup/file && sudo apt-get install",
        "au_576306: sudo apt-get install gnome-disks"
      ],
      "Explanations about Options": {}
    },
    {
      "Command": "dpkg",
      "MP Summary": "package manager for Debian",
      "Most Similar TLDR Task": "List installed packages",
      "Most Similar TLDR Script": "dpkg -l {{pattern}}",
      "Top-3 Similar Questions": [
        "ul_654369: Where does Debian store the list of installed packages?",
        "au_9882: What directories do I need to save to backup my user settings?",
        "au_158052: Is there a way to backup your package configuration?"
      ],
      "Top-3 Scripts": [
        "ul_654369: /var/lib/dpkg/status\n\nman dpkg",
        "au_9882: dpkg --get-selections > ~/my-packages.txt\n\nsudo dpkg --set-selections < ~/my-packages.txt",
        "au_158052: dpkg --get-selections > /path/to/backup/file\n\ndpkg --set-selections < /path/to/backup/file && sudo apt-get install"
      ],
      "Explanations about Options": {
        "--set-selections": "Set package selections using file read from stdin. This file should be in the\n format \u201cpackage state\u201d, where state is one of install, hold, deinstall or purge.\n Blank lines and comment lines beginning with \u2018#\u2019 are also permitted."
      }
    },
    {
      "Command": "apt-get",
      "MP Summary": "APT package handling utility - command-line interface",
      "Most Similar TLDR Task": "Remove a package and its configuration files",
      "Most Similar TLDR Script": "apt-get purge {{package}}",
      "Top-3 Similar Questions": [
        "au_9882: What directories do I need to save to backup my user settings?",
        "au_158052: Is there a way to backup your package configuration?",
        "au_94779: Can you use backup of one machine on a different machine?"
      ],
      "Top-3 Scripts": [
        "au_9882: sudo apt-get -u dselect-upgrade",
        "au_158052: dpkg --set-selections < /path/to/backup/file && sudo apt-get install",
        "au_94779: sudo dpkg --set-selections <packages\nsudo apt-get dselect-upgrade"
      ],
      "Explanations about Options": {}
    },
    {
      "Command": "apt-mark",
      "MP Summary": "show, set and unset various settings for a package",
      "Most Similar TLDR Task": "Mark a package as automatically installed",
      "Most Similar TLDR Script": "sudo apt-mark auto {{package_name}}",
      "Top-3 Similar Questions": [
        "ul_654369: Where does Debian store the list of installed packages?"
      ],
      "Top-3 Scripts": [
        "ul_654369: awk '/^Package:/ { p = $2 }\n     /^Architecture/ { a = $2 }\n     /^Auto-Installed: 1/ { printf \"%s:%s\\n\", p, a }' /path/to/extended_states |\nxargs sudo apt-mark auto"
      ],
      "Explanations about Options": {}
    }
  ]
}